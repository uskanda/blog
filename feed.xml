<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>GHOST IN THE SUIT</title>
  <subtitle>プログラムとかガジェットとか</subtitle>
  <id>http://blog.uskanda.com/</id>
  <link href="http://blog.uskanda.com/"/>
  <link href="http://blog.uskanda.com/feed.xml" rel="self"/>
  <updated>2013-12-17T15:15:00Z</updated>
  <author>
    <name>Yusuke Kanda</name>
  </author>
  <entry>
    <title>Capistranoでgitレポジトリのサブディレクトリ以下をデプロイ対象にする</title>
    <link rel="alternate" href="http://blog.uskanda.com/2013/12/18/capistrano-git-subdir/"/>
    <id>http://blog.uskanda.com/2013/12/18/capistrano-git-subdir/</id>
    <published>2013-12-17T15:15:00Z</published>
    <updated>2013-12-17T16:03:57+00:00</updated>
    <author>
      <name>Yusuke Kanda</name>
    </author>
    <content type="html">&lt;h2 id="toc_0"&gt;gitの特定サブディレクトリ以下だけデプロイしたいんです＞＜&lt;/h2&gt;

&lt;p&gt;Subversionからgitへの移行をしていると、
&lt;a href="https://github.com/capistrano/capistrano"&gt;Capistrano&lt;/a&gt;の移行でつまづきました。&lt;/p&gt;

&lt;p&gt;これまで、svnの特定のサブディレクトリ以下を取得、デプロイしていたけど、
gitはそもそもサブディレクトリ以下のみを指定したcloneができないので、そのまま移行できなかった。  &lt;/p&gt;

&lt;p&gt;※これを書くときに調べたら、sparse-checkout という機能はあるみたい。&lt;br&gt;
&lt;a href="http://okitan.tumblr.com/post/7642201668/git-sparse-checkout"&gt;何もわからない / git の sparse-checkout&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;教えて&lt;a href="http://stackoverflow.com/questions/29168/deploying-a-git-subdirectory-in-capistrano"&gt;Stackoverflow&lt;/a&gt;した結果、下記のようにすればOKでした。&lt;/p&gt;

&lt;h2 id="toc_1"&gt;set :deploy_via, :remote_cache を指定している場合&lt;/h2&gt;

&lt;p&gt;Capfile, deploy.rbに下記を追加。&lt;/p&gt;

&lt;h5 id="toc_2"&gt;Capfile&lt;/h5&gt;
&lt;pre class="highlight ruby"&gt;&lt;span class="nb"&gt;require&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;capistrano/recipes/deploy/strategy/remote_cache&amp;#39;&lt;/span&gt;

&lt;span class="k"&gt;class &lt;/span&gt;&lt;span class="nc"&gt;RemoteCacheSubdir&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;Capistrano&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Deploy&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Strategy&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;RemoteCache&lt;/span&gt;

  &lt;span class="kp"&gt;private&lt;/span&gt;

  &lt;span class="k"&gt;def &lt;/span&gt;&lt;span class="nf"&gt;repository_cache_subdir&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;configuration&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:deploy_subdir&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="no"&gt;File&lt;/span&gt;&lt;span class="nf"&gt;.join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;repository_cache&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;configuration&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:deploy_subdir&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
      &lt;span class="n"&gt;repository_cache&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

  &lt;span class="k"&gt;def &lt;/span&gt;&lt;span class="nf"&gt;copy_repository_cache&lt;/span&gt;
    &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="nf"&gt;.trace&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;copying the cached version to &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;configuration&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:release_path&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;copy_exclude&lt;/span&gt;&lt;span class="nf"&gt;.empty?&lt;/span&gt; 
      &lt;span class="n"&gt;run&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;cp -RPp &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;repository_cache_subdir&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;configuration&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:release_path&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &amp;amp;&amp;amp; &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;mark&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
      &lt;span class="n"&gt;exclusions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;copy_exclude&lt;/span&gt;&lt;span class="nf"&gt;.map&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;--exclude=&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="nf"&gt;.join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="n"&gt;run&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rsync -lrpt &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;exclusions&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;repository_cache_subdir&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;/* &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;configuration&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:release_path&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &amp;amp;&amp;amp; &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;mark&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="ss"&gt;:strategy&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="no"&gt;RemoteCacheSubdir&lt;/span&gt;&lt;span class="nf"&gt;.new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;
&lt;h5 id="toc_3"&gt;deploy.rb&lt;/h5&gt;
&lt;pre class="highlight ruby"&gt;&lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="ss"&gt;:deploy_subdir&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;project/subdir&amp;quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;h2 id="toc_4"&gt;set :deploy_via, :copy の動作をさせたい場合&lt;/h2&gt;

&lt;p&gt;今回やりたかったのはこちら。
方法はいくつかためしたけど、gemになっている下記はちゃんと動きました。&lt;/p&gt;

&lt;p&gt;&lt;a href="https://github.com/yyuu/capistrano-copy-subdir"&gt;yyuu/capistrano-copy-subdir&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Gemを追加するだけで動作します。&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;span class="n"&gt;gem&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;capistrano-copy-subdir&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="highlight shell"&gt;&lt;span class="gp"&gt;$ &lt;/span&gt;bundle install
&lt;/pre&gt;
&lt;p&gt;インストール後、
deploy.rb内部の&lt;code&gt;deploy_via&lt;/code&gt;自体を:copyでなく、:copy_subdirに書き換えます。&lt;/p&gt;

&lt;h5 id="toc_5"&gt;deploy.rb&lt;/h5&gt;
&lt;pre class="highlight ruby"&gt;&lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:deploy_via&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:copy_subdir&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:deploy_subdir&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;project/subdir&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;これでsvnで&lt;code&gt;set :deploy\_via, :copy&lt;/code&gt;しているときと同等の動作になりました。&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Vimのrelativenumber設定が便利すぎてヤバイ</title>
    <link rel="alternate" href="http://blog.uskanda.com/2013/12/14/vim-set-relativenumber/"/>
    <id>http://blog.uskanda.com/2013/12/14/vim-set-relativenumber/</id>
    <published>2013-12-13T16:00:00Z</published>
    <updated>2013-12-17T16:03:57+00:00</updated>
    <author>
      <name>Yusuke Kanda</name>
    </author>
    <content type="html">&lt;p&gt;何故か近々会社でVimについて話すことになったんで、Vim環境を整理してたら良い設定を知りました。&lt;/p&gt;

&lt;h2 id="toc_0"&gt;カーソルのある行との差分行数を表示してくれるrelativenumber&lt;/h2&gt;

&lt;p&gt;Vimでは、下記設定をするとウィンドウ左に行数を表示できます。&lt;/p&gt;
&lt;pre class="highlight text"&gt;set number
&lt;/pre&gt;
&lt;p&gt;&lt;img alt="set number画像" src="http://gyazo.com/5e6b1cc7ece7aeb807aab144780cbaf3.png" /&gt;&lt;/p&gt;

&lt;p&gt;これに加えて、下記の設定を加えると&lt;/p&gt;
&lt;pre class="highlight text"&gt;set relativenumber
&lt;/pre&gt;
&lt;p&gt;見栄えがこうなります。&lt;/p&gt;

&lt;p&gt;&lt;img alt="set relativenumber画像" src="http://gyazo.com/4d20af53dcff2dc779a16b0457c0d5d8.gif" /&gt;&lt;/p&gt;

&lt;h2 id="toc_1"&gt;何が嬉しいのか&lt;/h2&gt;

&lt;p&gt;こんな見え方が嬉しいのはVimならでは。つまり、
移動・削除等のオペレータ利用時のカウントが一目瞭然なのです！
&lt;/p&gt;

&lt;h3 id="toc_2"&gt;例&lt;/h3&gt;

&lt;p&gt;こんなファイルがあったとします。今カーソルは24行目にあります。
ここからメソッドふたつ、52行目の&amp;quot;end&amp;quot;までを一気に削除したい場合&amp;hellip;&lt;/p&gt;

&lt;p&gt;&lt;img alt="relativenumber説明サンプル" src="http://gyazo.com/83d07d578b6da17b33f6a84572c5bea5.png" /&gt;&lt;/p&gt;

&lt;p&gt;僕のVim力ではこれまで行単位の範囲選択(V)をしてから52行目あたりまで移動して、
選択範囲の削除(d)をしていました。&lt;/p&gt;

&lt;p&gt;&lt;img alt="範囲選択" src="http://gyazo.com/3d7152a7734029c43571bdc028c3437e.gif" /&gt;&lt;/p&gt;

&lt;p&gt;これに対して、&lt;code&gt;set relativenumber&lt;/code&gt; していると&amp;hellip;&lt;/p&gt;

&lt;p&gt;&lt;img alt="relativenumberした場合" src="http://gyazo.com/d2df5a268c71d7823d404d1344d0a271.png" /&gt;&lt;/p&gt;

&lt;p&gt;削除したい範囲が28行先までであることがすぐわかります。
つまり、d28jと打つだけで削除できます。瞬殺です。&lt;/p&gt;

&lt;p&gt;&lt;img alt="relativenumberした場合の削除" src="http://gyazo.com/9b3e4d0480c24aa5d1bf7190e4c74842.gif" /&gt;&lt;/p&gt;

&lt;p&gt;こんな感じで、大きく離れた行や、行間に対する作業が非常にしやすくなります。おすすめです。
Vim7.3以降で使えるので、最近のLinuxディストリのビルトインVimやMacVimなら使えるはずです。&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>middleman-blogでbuildしたら何故か生成されない記事がある</title>
    <link rel="alternate" href="http://blog.uskanda.com/2013/12/10/middleman-blog-build-missed-some-article/"/>
    <id>http://blog.uskanda.com/2013/12/10/middleman-blog-build-missed-some-article/</id>
    <published>2013-12-10T14:00:00Z</published>
    <updated>2013-12-17T16:03:57+00:00</updated>
    <author>
      <name>Yusuke Kanda</name>
    </author>
    <content type="html">&lt;h2 id="toc_0"&gt;記事が出てきません&lt;/h2&gt;
&lt;pre class="highlight text"&gt;bundle exec middleman build
&lt;/pre&gt;
&lt;p&gt;あれ？最新の記事が出てこない&amp;hellip;ビルドでエラーも出てない(´・ω・`)？&lt;br&gt;
ローカルのサーバ経由だとちゃんと見えるのになー？&lt;br&gt;
published: false でもないんだけどなー？&lt;/p&gt;

&lt;h2 id="toc_1"&gt;もしかして：日付が未来日&lt;/h2&gt;

&lt;p&gt;空気読んでくれてただけだった orz&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>OctopressからMiddlemanに移行した</title>
    <link rel="alternate" href="http://blog.uskanda.com/2013/12/09/transfer-from-octopress-to-middleman/"/>
    <id>http://blog.uskanda.com/2013/12/09/transfer-from-octopress-to-middleman/</id>
    <published>2013-12-08T15:00:00Z</published>
    <updated>2013-12-17T16:03:57+00:00</updated>
    <author>
      <name>Yusuke Kanda</name>
    </author>
    <content type="html">&lt;p&gt;今年のはじめにWordpressからOctopressに移行したけど、結局ブログを書くようにはならなかったよ&amp;hellip;
Middlemanを見てみたらよさげだったので、もう一度書き始めるきっかけに再度移行してみた。&lt;/p&gt;

&lt;h2 id="toc_0"&gt;Octopressでしっくり来なかったところ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;テンプレートエンジンに挫折&lt;br&gt;
Liquidの記法が絶望的に覚えられない&amp;hellip;&lt;/li&gt;
&lt;li&gt;ファイル構成&lt;br&gt;
Octopressはgem/コマンドラインでの管理ツールが提供されておらず、cloneしたOctopressそのものからブログを構築していく。
Octopress自体のバージョンアップをしたい場合はpullして持ってくることになる。
本文以外のところのタグを変更しようとしてプラグインを独自にいじっているとOctopress本体の更新とのコンフリクトが厳しい。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id="toc_1"&gt;Middlemanを触ってみて&lt;/h2&gt;

&lt;h3 id="toc_2"&gt;よさげなところ&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;構成が単純&lt;br&gt;
sources以下にテンプレートやassetsを放り込んでいけばOK&lt;/li&gt;
&lt;li&gt;Railsライク&lt;br&gt;
Padrinoベースなせいかもしれないけど、ヘルパー名やディレクトリ構成等、明らかにRailsを意識して作っている感じ。
いいか悪いかはともかく、Railsユーザには直観が働くようにできている。&lt;/li&gt;
&lt;li&gt;好きなテンプレートエンジンが選べる&lt;br&gt;
今回は初&lt;a href="http://slim-lang.com"&gt;Slim&lt;/a&gt;にしてみた。&lt;/li&gt;
&lt;li&gt;マルチブログが簡単&lt;br&gt;
Webサーバの設定に頼ることなく、複数ブログが簡単につくれる。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id="toc_3"&gt;いまいちなところ&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ブログ機能自体は貧弱&lt;br&gt;
主眼は静的サイトジェネレータなので、
middleman-blog が提供する機能は記事管理/タグ付け/年別アーカイブ/ページネーションぐらい。
cssもデフォルトだとなし。プロジェクト生成直後に見える画面↓なのは流石にどうだろう&amp;hellip;&lt;/p&gt;

&lt;p&gt;&lt;a href="http://www.flickr.com/photos/uskanda/11209451975/" title="middleman-blog-default by uskanda, on Flickr"&gt;&lt;img src="http://farm6.staticflickr.com/5493/11209451975_540c5f2e83_n.jpg" width="320" height="183" alt="middleman-blog-default"&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;サクッとブログ作るって用途には向いてないかな。でも0から作っていくの楽しい。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;デプロイ設定&lt;br&gt;
Github Pagesを強く意識しているOctopressよりはデプロイ設定が面倒な感じ。&lt;br&gt;
↓を参考にさせて頂いてTravis CI経由でビルド成功時にGithub Pagesにプッシュするようにした。&lt;/p&gt;

&lt;p&gt;&lt;a href="http://webtech-walker.com/archive/2013/08/jekyll_to_middleman.html"&gt;ブログをJekyllからmiddlemanに移行してTravis CIでGitHub Pagesにデプロイするようにした - Webtech Walker&lt;/a&gt;&lt;br&gt;
&lt;a href="http://tricknotes.hateblo.jp/entry/2013/06/17/020229"&gt;Middleman で作った web サイトを Travis + GitHub pages でお手軽に運用する - tricknotesのぼうけんのしょ&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
  </entry>
  <entry>
    <title>Android3.2で通知を出そうとするとエラーが出る</title>
    <link rel="alternate" href="http://blog.uskanda.com/2013/04/01/android-support-library-error-on-android-32/"/>
    <id>http://blog.uskanda.com/2013/04/01/android-support-library-error-on-android-32/</id>
    <published>2013-04-01T10:22:00Z</published>
    <updated>2013-12-17T16:03:57+00:00</updated>
    <author>
      <name>Yusuke Kanda</name>
    </author>
    <content type="html">&lt;h2 id="toc_0"&gt;問題&lt;/h2&gt;

&lt;p&gt;Androidアプリで通知を出そうとするとエラーの出る機種があるよ&amp;hellip;
Honeycombの一部機種でだけ起こってるみたいだよ！&lt;/p&gt;

&lt;h2 id="toc_1"&gt;こんなエラーが出てる&lt;/h2&gt;
&lt;pre class="highlight text"&gt;E/AndroidRuntime(25922): FATAL EXCEPTION: main
E/AndroidRuntime(25922): java.lang.NoSuchMethodError: android.app.Notification$Builder.setProgress
E/AndroidRuntime(25922):    at android.support.v4.app.NotificationCompatIceCreamSandwich.add(NotificationCompatIceCreamSandwich.java:31)
E/AndroidRuntime(25922):    at android.support.v4.app.NotificationCompat$NotificationCompatImplIceCreamSandwich.build(NotificationCompat.java:104)
E/AndroidRuntime(25922):    at android.support.v4.app.NotificationCompat$Builder.build(NotificationCompat.java:558)
&lt;/pre&gt;
&lt;h2 id="toc_2"&gt;原因&lt;/h2&gt;

&lt;p&gt;Android Support LibraryがAPI Level 13(Android 3.2)の機種に対してバグってたよ&amp;hellip;
手元の3.0や3.1で試しても出なかったはずだよ&amp;hellip;&lt;/p&gt;

&lt;p&gt;&lt;a href="https://code.google.com/p/android/issues/detail?id=36502"&gt;Issue 36502 - android - android support library v4 and notification on android-13 - Android - An Open Handset Alliance Project - Google Project Hosting&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;android-support-v4.jarを更新したら直ったけどライブラリの差し替えなんてやりたくない時期だよ&amp;hellip;(´・ω・`)&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>MySQLで全てのテーブルのカラムとインデックス有無を表示したい</title>
    <link rel="alternate" href="http://blog.uskanda.com/2013/02/23/mysql-show-columns-and-indices-from-all-the-tables/"/>
    <id>http://blog.uskanda.com/2013/02/23/mysql-show-columns-and-indices-from-all-the-tables/</id>
    <published>2013-02-23T10:00:00Z</published>
    <updated>2013-12-17T16:03:57+00:00</updated>
    <author>
      <name>Yusuke Kanda</name>
    </author>
    <content type="html">&lt;p&gt;今の状況：&lt;/p&gt;

&lt;blockquote class="twitter-tweet"&gt;&lt;p&gt;ひたすらMySQLのEXPLAINと格闘中である&lt;/p&gt;&amp;mdash; Yusuke Kanda (@uskanda) &lt;a href="https://twitter.com/uskanda/status/305174512075411457"&gt;February 23, 2013&lt;/a&gt;&lt;/blockquote&gt;

&lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;

&lt;p&gt;そればっかりやっているわけにもいかないんだけど&amp;hellip;&lt;/p&gt;

&lt;p&gt;さて、MySQLで、ER図も何もないので今のDB全体をなんとなく俯瞰したい。
当方生ぬるいORM厨でございます。&lt;/p&gt;

&lt;p&gt;showなんとかを繰り返さなくても、DBのメタデータ一式をINFORMATION_SCHEMAデータベースから取れるのね。便利。&lt;/p&gt;

&lt;p&gt;&lt;a href="http://dev.mysql.com/doc/refman/5.1/ja/information-schema.html"&gt;MySQL :: MySQL 5.1 リファレンスマニュアル :: 21 INFORMATION_SCHEMA データベース&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;テーブルと各テーブルのカラム、インデックスを下記で取得。
ツール使えよって話だけど、手探りの状態からだと手っ取り早い。&lt;/p&gt;
&lt;pre class="highlight text"&gt;SELECT information_schema.columns.table_name, information_schema.columns.column_name, 
       information_schema.columns.column_type, information_schema.statistics.index_name 
FROM information_schema.columns LEFT JOIN information_schema.statistics 
ON information_schema.columns.table_name = information_schema.statistics.table_name 
AND information_schema.columns.column_name = information_schema.statistics.column_name;
&lt;/pre&gt;
&lt;p&gt;複合インデックスが微妙だけど今欲しいものとしては問題なし。
また、mysql起動時に-HでHTML出力にできたので、それを手元において確認中。&lt;/p&gt;
</content>
  </entry>
</feed>
