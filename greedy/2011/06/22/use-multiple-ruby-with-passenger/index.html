<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta content="IE=edge;chrome=1" http-equiv="X-UA-Compatible" />
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" rel="stylesheet" />
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" />
    <link href="/stylesheets/greedy.css" rel="stylesheet" />
    <link href="/stylesheets/syntax.css" rel="stylesheet" />
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
    <title>GHOST IN THE SUIT - RVM+PassengerでRuby1.8系と1.9系を同時利用する</title><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="cycle/feed.xml" />
  </head>
  <body>
    <div class="header">
      <div class="container">
        <div class="row">
          <div class="col-sm-9">
            <h1 class="site_title">
              <a href="/">物欲遡及決裁</a>
            </h1>
            <p>
              なんか買ったら書く、懺悔のレビュー。
            </p>
          </div>
          <div class="col-sm-3 hidden-xs externals">
            <a href="/greedy/feed.xml"><i class="fa fa-rss fa-3x"></i></a>
          </div>
        </div>
      </div>
    </div>
    <div class="container main">
      <div class="row">
        <div class="col-sm-9">
          <div id="main" role="main"><article>
  <div class="title">
    <div class="subject">
      RVM+PassengerでRuby1.8系と1.9系を同時利用する
    </div>
    <div class="date">
      2011-06-22 00:00:00 +0900
    </div>
  </div>
  <div class="body"><p>半年前に書いたものがアップせずに残ってたorz<br>
一応あげておこう。。。    </p>

<p>RedmineはまだRuby1.8/Rails2系しか対応してないからRuby1.8を使わなきゃいけないけど、<br>
他のRailsアプリはRuby1.9で動作させるようにしたい！というわけで<br>
Passengerで複数のRubyを使ってアプリを動かす方法を探したら、<br>
そのまんまの記事がPassenger公式に上がってた。    </p>

<p><a title="Permanent link to Phusion Passenger &amp; running multiple Ruby versions" rel="bookmark" href="http://blog.phusion.nl/2010/09/21/phusion-passenger-running-multiple-ruby-versions/">Phusion Passenger &amp; running multiple Ruby versions</a>    </p>

<p>Passengerはnginx利用で単体起動する機能があるようで、<br>
&ldquo;passenger start&quot;でnginxインストールから起動までやってくれる。<br>
standaloneの場合、これで立ち上がったPassengerに大して、メインのApache/nginxのリバースプロキシでアクセスする。<br>
rc.localに自動起動のための設定を書いた。    </p>
<pre class="highlight text">su - $USERNAME -c &quot;    
cd /webapps/redmine    
rvm use 1.8.7-head    
passenger start -a 127.0.0.1 -p 3000 -e production -d    
rvm use 1.9.2-head&quot;
</pre><h3>
      Comments
    </h3>
    <div aria-live="polite" id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
    <script type="text/javascript">
      var disqus_shortname = 'ghostinthesuit';
      var disqus_identifier = "http://blog.uskanda.com/greedy/2011/06/22/use-multiple-ruby-with-passenger/";
      var disqus_url = 'http://blog.uskanda.com/greedy/2011/06/22/use-multiple-ruby-with-passenger/';
      var disqus_script = 'embed.js';
      
      (function () {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }());
    </script>
  </div>
</article>
          </div>
        </div>
        <div class="col-sm-3">
          <aside>
            <div class="gadget" id="recents">
              <span class="title">最近の投稿</span>
              <ol>
                <li>
                  <a href="/greedy/2011/06/22/use-multiple-ruby-with-passenger/">RVM+PassengerでRuby1.8系と1.9系を同時利用する(06/22)</a>
                </li>
              </ol>
            </div>
            <div class="gadget" id="adsense">
              <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
              <!-- BlogSide2 -->
              <ins class="adsbygoogle"
                   style="display:inline-block;width:200px;height:200px"
                   data-ad-client="ca-pub-1385530273298456"
                   data-ad-slot="9191807793"></ins>
              <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
              
            </div>
            <div class="gadget" id="tags">
              <span class="title">タグ一覧</span>
              <div class="gadget_body"><a href="/greedy/tags/ruby/">
                Ruby(1) </a><a href="/greedy/tags/rvm/">
                RVM(1) </a><a href="/greedy/tags/passenger/">
                Passenger(1) </a>
              </div>
            </div>
            <div class="gadget" id="twitter">
              <span class="title">ツイート</span><a class="twitter-timeline" data-chrome="noheader noborders transparent" data-widget-id="408280914938982400" href="https://twitter.com/uskanda">Tweets by @uskanda</a>
              <script>
                !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
              </script>
            </div>
            <div class="gadget" id="archives">
              <span class="title">アーカイブ</span>
              <ol></ol>
              <li>
                <a href="/greedy/2011/">2011</a> (1)
              </li>
            </div>
            <div class="gadget" id="amazon">
              <script type="text/javascript"><!--
              amazon_ad_tag = "uasmks-22"; amazon_ad_width = "160"; amazon_ad_height = "600";//--></script>
              <script type="text/javascript" src="http://ir-jp.amazon-adsystem.com/s/ads.js"></script>
              
            </div>
          </aside>
        </div>
      </div>
    </div>
    <div class="footer">
      <div class="container">
        <div class="text-center">
          <style>
            .blogresponsivewide { width: 320px; height: 50px; }@media(min-width: 500px) { .blogresponsivewide { width: 468px; height: 60px; } }@media(min-width: 800px) { .blogresponsivewide { width: 728px; height: 90px; } }
          </style>
          <script>
            async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
          </script>
          <ins class="adsbygoogle blogresponsivewide" data-ad-client="ca-pub-1385530273298456" data-ad-slot="4816571790" style="display:inline-block"></ins>
          <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
        </div>
      </div>
      <div class="container">
        &copy; Yusuke Kanda 2010-2013.
        <div class="pull-right">
          Powered by <a href="http://middlemanapp.com">Middleman</a>.    <img src="https://travis-ci.org/uskanda/blog.png?branch=master" />
        </div>
      </div>
    </div>
    <!-- Google Analytics -->
    <script type="text/javascript">
    
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-3828545-4']);
      _gaq.push(['_setDomainName', 'uskanda.com']);
      _gaq.push(['_trackPageview']);
    
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    
    </script>
    
  </body>
</html>