---
title: Ubuntu 12.04にアップグレードしたら名前解決できなくなった
tags:
- Ubuntu
- Server
categories:
- Server
---
さくらのVPS 2Gに現状の1.5Gからの移行を準備中。  
新サーバは出たてのUbuntu 12.04 LTSにしてみたら、名前解決ができなくなった＞＜  
以下、DNS情報はさくらのVPSの場合。

/etc/resolv.conf を見たら何も書いてない...  

```
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
```
resolvconfコマンドが自動生成するようになりました、とのこと。

そのresolvconfはインタフェース設定(/etc/network/interfaces)に記載の
DNSサーバ情報を/etc/resolv.confに書いてくれるのだけど、interfacesに  
下記のように書いても変化なし。
<code>
dns-nameservers 210.188.224.11
dns-search sakura.ne.jp
</code>

resolvconfのmanを読むとデフォルト設定が/etc/resolvconf/resolv.conf.d/baseらしい。
<blockquote>
/etc/resolvconf/resolv.conf.d/base
File containing basic resolver information.  The lines in this file are included in the resolver configuration file even when no interfaces are configured.
</blockquote>

このファイルに既存のresolv.conf設定を書いて暫定対処。
<code>
search sakura.ne.jp
nameserver 210.188.224.11
</code>
