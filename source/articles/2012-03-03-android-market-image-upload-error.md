---
title: Android Marketアプリ登録時の画像アップロード失敗とデベロッパー登録時の留意点
tag:
- Android
---
案件でAndroidアプリの受託開発を行なっていて、リリース時にハマったのでログを残しておく。
お客様は過去、Androidアプリリリースはなかったので、下記順でデベロッパー登録からリリース作業を予定していた。

<ol>
	<li>Android MarketにGoogleアカウントでログインしてデベロッパー登録(Google Checkoutで$25支払う)</li>
	<li><a href="https://market.android.com/publish/Home" target="_blank">マーケットのアプリ登録画面</a>から新規アプリを追加、apkをアップロード</li>
	<li>アプリ説明文を記述、スクリーンショット等の画像をアップロードして公開</li>
</ol>

しかし、3.でスクリーンショットをアップロードしようとすると



<blockquote>「応答を解析できません。JSON 応答を変更するブラウザ拡張機能やアドオンがインストールされている場合は、 それらを無効にしてからこのページを更新してください。」</blockquote>



というメッセージが出て登録できず...。
画像アップロードのAjaxがGoogle側に蹴られているような挙動で、
ブラウザ・OS・ネットワーク環境を変更しても改善しない。
理由が思い当たらず途方に暮れていたら、半日ほどして



<blockquote>Android マーケットの登録料の支払いが拒否されました。</blockquote>



とのメッセージがアプリ登録画面に表示された。
何らかの理由でデベロッパー登録のクレジットカード決済が蹴られていたらしく、
これが原因で画像アップロードに失敗していたらしいorz

この登録未完了状態でもapkの登録はうまく行ったように見えるし、
画像のアップロードだけが何らかの理由で失敗したように見えるので予想がつかない。
Google Checkout(Google Wallet)に移動して問題を解決しろ、と言われるが
Google Wallet側からも再支払いする方法がなく、このアカウントはマーケットに開発者登録されていながら
アプリ公開できない中途半端状態に...

(あとから見るとMarket側のアプリ登録画面から再支払いできるようになっていた。
 Googleに問い合わせるか、時間を置けば再支払いはできるようだ。)

今回のケースではお客様に別アカウントと別クレジットカードで再登録頂いてなんとかなったのだけど、
別クレカの登録、Maps API Keyの再取得とapk再生成に時間が必要となってしまった。

なお、正常にクレジットカード登録が終わり、アプリが利用可能となると



<blockquote>Android マーケットへの登録が承認されました。</blockquote>



とメッセージがアプリ登録画面に出現する。以前登録した際は一瞬でこの状態だったので
注意が向いていなかった...

今回の教訓はデベロッパー登録をしていない場合、
<strong>Androidマーケットへのリリース時はデベロッパー登録を必ず先にしておく！</strong>
ということ。通常でも半日〜１日かかるケースもある等、Google先生の機嫌に左右されて時間がかかるリスクがあるので、
一週間余裕を持っておいたほうがいいと思う。
